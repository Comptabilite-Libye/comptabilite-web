<body class="tt" [ngClass]="{ 'disabled': IsLoading }">
    <!--  -->
    <!-- Note: This example only works with Windows Insider Preview Builds 16237+. -->
    <app-loading [IsLoading]="IsLoading">
    </app-loading>
    <header (click)="clearSelected()">

        <label class="header_name"> مراكز التكلفة</label>
        <button class="close-button btn btn-default" (click)="closeThisComponent()">X</button>

    </header>
    <aside>
        <div class="Groupe-Bouton" (click)="clearSelected()">

        </div>
    </aside>
    <section id="main-container">

        <div class="material-table">
            <div class="card">
                <p-toast></p-toast>
                <p-table #dt1 [value]="dataCostCentre" [globalFilterFields]="['designationAr', 'designationLt']"
                    selectionMode="single" [metaKeySelection]="false" [(selection)]="selectedCostCentre"
                    (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)" dataKey="code"
                    rowGroupMode="rowspan" groupRowsBy="typeCostCentreDTO.designationAr"  
                    [tableStyle]="{'min-width': '50rem', 'width': '100%' , 'padding': '1px 1px 1px 1px'}">

                    <ng-template pTemplate="caption" class="col-md-12">

                        <div class="flex-row-start flex-12">
                            <fieldset style="padding: 5px;">
                                <section class="flex-row-start">

                                    <label class="control-label-titer flex-6">البيان :</label>
                                    <span class="p-input-icon-left ml-auto flex-6">
                                        <input pInputText class="recherche-value" [(ngModel)]="searchTerm"
                                            name="zone-recherche" type="text"
                                            (keyup.enter)="dt1.filterGlobal($any($event.target).value, 'contains')"
                                            placeholder="البيان ..." />
                                    </span>
                                    <button type="button" class="Bouton-rechercher btn  btn-default "
                                        data-original-title="Add"
                                        (click)="dt1.filterGlobal($any($event.target).value, 'contains')">
                                        <div class="bouton_style-2" style="margin: 0px 15px 0px 0px;">بحث</div>
                                        <i class="fa-solid fa-magnifying-glass search-icon"
                                            style="font-size: 18px ;padding-top:2px ;margin: 0px 15px 0px 0px;"></i>
                                    </button>
                                    <button type="button" class="Bouton-rechercher btn  btn-default "
                                        data-original-title="Add" (click)="clear(dt1)" (click)="GelAllCostCentre()">
                                        <div class="bouton_style-2">إعادة تعيين</div>
                                        <i class="fa-solid fa-arrows-rotate search-icon"
                                            style="padding-top: 2px; padding-right: 3px; font-size: 18px;"></i>
                                    </button>
                                </section>
                            </fieldset>


                            <section class="flex-row-start flex-5">
                            </section>

                            <fieldset style="padding: 5px;">
                                <section class="flex-row-start flex-6">
                                    <button   data-backdrop="false" type="button"
                                        class="Bouton-add-new1 btn  btn-default " data-original-title="Add"
                                        data-toggle="modal" data-target="#Modal" (click)="onOpenModal('add')">
                                        <div class="bouton_style-2">إضافة</div>
                                        <i class="fa-solid fa-plus add-icon"
                                            style=" font-size:18px ;padding-top:2px ;margin: 0px 10px 0px 0px;"></i>
                                    </button>
                                    <button data-backdrop="false" type="button"
                                        class="Bouton-add-new1 btn  btn-default " data-original-title="Add"
                                        data-toggle="modal" data-target="#Modal" (click)="onOpenModal('edit')">
                                        <div class="bouton_style-2">تعديل</div>
                                        <i class="fa-solid fa-pen modif-icon"
                                            style=" font-size:18px ;padding-top:2px ;margin: 0px 10px 0px 0px;"></i>
                                    </button>
                                    <button   type="button" 
                                        class="Bouton-add-new2 btn  btn-default " data-original-title="Delete"
                                        data-toggle="modal" data-target="#ModalDelete" (click)="onOpenModal('Delete')">
                                        <div class="bouton_style-2">حذف</div>
                                        <i class="fa-solid fa-trash-can delete-icon"></i>
                                    </button>
                                    <button data-backdrop="false" type="button" class="Bouton-add-new2 btn btn-default "
                                        data-original-title="Print" data-toggle="modal" data-target="#ModalPrint"
                                        (click)="onOpenModal('Print')">
                                        <div class="bouton_style-2">طباعة</div>
                                        <i class="fa-solid fa-print print-icon"></i>
                                    </button>

                                </section>
                            </fieldset>


                        </div>




                    </ng-template>



                    <ng-template pTemplate="header">
                        <tr style="font-size: 15px !important;">
                            <th style="width: 80px;">  الفئة</th>
                            <!-- <th style="width: 80px;">رقم الحساب</th>  -->
                            <!-- <th style="width: 65px;">المستوى</th> -->
                            <th>الرمز</th>
                            <th>البيان بالعربي</th>
                            <th> البيان باللاتيني</th>
                            <!-- <th> نوع مركز التكلفة</th> -->
                            <th>مركز ربحي</th>
                            <th>تفصيلي</th>
                            <th class="act-col">متداول</th>
                        </tr>
                    </ng-template>






                    <ng-template pTemplate="body" let-fl let-rowIndex="rowIndex" let-rowgroup="rowgroup"
                        let-rowspan="rowspan">
                        <tr [pSelectableRow]="fl">
                            <td *ngIf="rowgroup" [attr.rowspan]="rowspan">
                                
                                <span class="font-bold ml-2">{{fl.typeCostCentreDTO.designationAr}}</span>
                            </td>
                            <!-- <td style="font-size: 15px !important;">{{fl.classement}}</td> -->
                            <!-- <td style="font-size: 15px !important  ;text-align: center !important;" class="warning"
                                [ngStyle]="{'background-image': (fl.niveau == 0) ? (getPicNV0()) : (fl.niveau == 1) ? (getPicNV1()) : (fl.niveau == 2) ? (getPicNV2()) : (fl.niveau == 3) ? (getPicNV3())  : ((fl.niveau == 4) ? (getPicNV4()) : (getPicNVNull()))  }"
                                style=" width: 65px ;background-repeat: no-repeat;background-size:25px 25px;background-position-y: 2px;background-position-x: 20px;">
                            </td> -->
                            <td style="font-size: 15px !important;">{{fl.codeSaisie}}</td>
                            <td style="font-size: 15px !important;">{{fl.designationAr}}</td>
                            <td style="font-size: 15px !important;">{{fl.designationLt}}</td>
                            <!-- <td style="font-size: 15px !important;">{{fl.typeCostCentreDTO.designationAr}}</td> -->
                            <td style="font-size: 15px !important;">
                                <p-checkbox [readonly]="true" [(ngModel)]="fl.profitCentre" [binary]="true"
                                    inputId="binary">{{fl.profitCentre}}</p-checkbox>
                            <td style="font-size: 15px !important;">
                                <p-checkbox [readonly]="true" [(ngModel)]="fl.detail" [binary]="true"
                                    inputId="binary">{{fl.detail}}</p-checkbox>
                            <td class="act-col">

                                <p-checkbox [readonly]="true" [(ngModel)]="fl.actif" [binary]="true"
                                    inputId="binary">{{fl.actif}}</p-checkbox>
                            </td>





                        </tr>
                    </ng-template>

                </p-table>


            </div>
        </div>
    </section>
    <!-- <aside>aside</aside> -->
    <footer>footer

        <!-- <div id="pdfContainer"></div>  -->
    </footer>
</body>






<!-- modal primeNG ADD -->
<p-dialog id="Modal" header="Header" [scrollLeft]="true" [closeOnEscape]="true" [(visible)]="visibleModal"
    data-backdrop="false" [modal]="true" styleClass="ModalAdd" [draggable]="false"
    [ngStyle]="{'height':  '220px !important'  }">


    <ng-template pTemplate="header">
        <h2 class="text-default headerForm"> {{formHeader}}</h2>
        <button class="btn btn-default cancel-add-ModalSmall" :closable="true" data-dismiss="modal"
            (click)="clearForm()"> <i class="fa-lg fa-fw fa fa-times  icon-fermer "></i>خروج
        </button>
        <button class="btn btn-default save-add-ModalSmall" (click)="PostCostCentre()"> <i
                class="fa-lg fa-fw fa fa-check icon-save"></i>
            حفظ
        </button>
        <p-toast key="toast1"></p-toast>
    </ng-template>

    <div class="modal-body">
        <!-- <form> -->
        <div class="flex-row-start flex-12">
            <fieldset class="flex-12">
                <div class="flex-row-start flex-12">
                    <section class="flex-row-start flex-6">
                        <label class="control-label flex-4 ">الرمز : <i
                                class="fa-lg fa-fw fa fa-times icon-required"></i></label>
                        <div class="control-input flex-5-45 ">
                            <input id="codeSaisie" maxlength="10" name="codeSaisie" type="text"
                                class="onlyForCentral form-control-dev input-xs" required [(ngModel)]="codeSaisie">
                        </div>
                    </section>
                    <section class="flex-row-start flex-2 ">
                        <p-checkbox [binary]="true" name="actif" value="val1" label="متداول"
                            [(ngModel)]="actif"></p-checkbox>
                    </section>
                    <section class="flex-row-start flex-2 ">
                        <p-checkbox [binary]="true" name="profit" value="val2" label="ربحي"
                            [(ngModel)]="profitCentre"></p-checkbox>
                    </section>
                    <section class="flex-row-start flex-2 ">
                        <p-checkbox [binary]="true" name="profit" value="val3" label="تفصيلي"
                            [(ngModel)]="detail"></p-checkbox>
                    </section>
                </div>
                <div class="flex-row-start flex-12">
                    <section class="flex-row-start flex-6">
                        <label class="control-label flex-4">البيان بالعربي : <i
                                class="fa-lg fa-fw fa fa-times icon-required"></i></label>
                        <div class="control-input flex-5-45">
                            <input type="text" id="designation_ar" maxlength="200" name="designation_ar"
                                class="onlyForCentral form-control-dev input-xs" [(ngModel)]="designationAr"
                                [required]="true">

                        </div>
                    </section>
                    <section class="flex-row-start flex-6">
                        <label class="control-label flex-4 "> البيان باللاتيني : <i
                                class="fa-lg fa-fw fa fa-times icon-required"></i></label>
                        <div class="control-input  flex-5-45">
                            <input type="text" id="designation_ar" maxlength="200" name="designation_ar"
                                class="onlyForCentral form-control-dev input-xs" [(ngModel)]="designationLt"
                                [required]="true">

                        </div>
                    </section>

                </div>
                <div class="flex-row-start flex-12">
                    
                    <section class="flex-row-start flex-6">
                        <label class="control-label flex-4"> نوع مركز التكلفة : <i
                                class="fa-lg fa-fw fa fa-times icon-required"></i></label>
                        <div class="control-input flex-5-45">
                            <p-dropdown name="typeCostCentre" [filter]="true" appendTo="body" class="dropdown"
                                [options]="listTypeCostCentreRslt" [(ngModel)]="selectedTypeCostCentre"
                                [style]="{'width':'100%'}" [autoDisplayFirst]="true" placeholder="&nbsp;"
                                [required]="true" [lazy]="true" #typeCostCentre="ngModel">
                            </p-dropdown>
                        </div>
                    </section>
                    <section class="flex-row-start flex-6">
                        
                    </section>

                </div>


            </fieldset>

        </div>




    </div>

</p-dialog>

<!-- modal primeNG  Delete-->
<p-dialog class="modal-delete" id="ModalDelete" data-backdrop="false" header="Header" [(visible)]="visDelete"
    styleClass="ModalDelete" [modal]="true" [draggable]="false" [resizable]="false">
    <ng-template pTemplate="header">
        <h2 class="text-default headerForm"> {{formHeader}}</h2>
    </ng-template>
    <div class="modal-body">
        <form action="" #addForms="ngForm">
            <fieldset class="deleteForms">
                <h4 class="text-delete ">هل أنت متأكد من الحذف ?

                    <button class="btn btn-default save-add-ModalSmall" style="right: 430px;"
                        (click)="DeleteCostCentre(code)"> <i class="fa-lg fa-fw fa fa-check icon-save"></i>
                        حذف
                    </button>
                    <button class="btn btn-default cancel-add-ModalSmall" style="right: 520px;" :closable="true"
                        data-dismiss="modal"> <i class="fa-lg fa-fw fa fa-times  icon-fermer "></i>خروج
                    </button>



                </h4>
            </fieldset>
            <br>
        </form>
    </div>
</p-dialog>
<!-- fin modal primeng  -->






<!-- modal primeNG Print -->
<p-dialog id="ModalPrint" header="Header" [scrollLeft]="true" [closeOnEscape]="true" [(visible)]="visibleModalPrint"
    data-backdrop="false" [modal]="true" styleClass="ModalPrint" [draggable]="false" [resizable]="false">
    <div>
        <div class="modal-header">
            <h3 class="footer-dev">
                <div class="action">
                    <h2 class="text-default headerForm"> {{formHeader}}</h2>

                    <button class="btn btn-default cancel-add-ModalSmall" :closable="false" data-dismiss="modal"
                        (click)="clearForm()"> <i class="fa-lg fa-fw fa fa-times  icon-fermer "></i>Fermer
                    </button>

                    <p-toast key="toast1"></p-toast>

                </div>
            </h3>
        </div>
        <div class="modal-body">
            <div id="pdfContainer"></div>


        </div>

    </div>
</p-dialog>